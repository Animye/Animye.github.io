---
title: 项目中常用的代码
date: 2020-01-20 10:32:56
tags:
  - 常用
---

## js

### 对象的合并和拷贝

<!-- more -->

```js
//如果健名相同后面的覆盖前面的
Object.assign(form, obj)----->Object.assign(目标对象, 被合并的对象)
//如果不想修改目标对象，可以将目标对象改成空 {}，
Object.assign({},form, obj)

//对象的扩展运算符实现拷贝
let obj = {name:'乔巴',age:'18',type:{name:'驯鹿'}}
let obj2 = {...obj}
console.log(obj2)

//在此多补充一下对象的扩展运算符的用法：
 // 2.添加属性
    let obj3 = {...obj,color:'brown'}
    console.log(obj3)

    // 3.修改属性（即使是引用类型，也不会影响原来的值）
    let obj4 = {...obj,type:{name:'梅花鹿'}}
    console.log(obj4)

 // 数组的拷贝
    let arr = [1,2,3,4]
    let arr1 = [...arr]
    console.log(arr1)

//JSON.parse 实现深拷贝
let obj = {name:'乔巴',age:'18',type:{name:'驯鹿'}}
let deepObj = JSON.parse(JSON.stringify(obj ))
```

### 数组的合并去重

```js
//合并
xxx.concat();
[...a, ...b];

// 去重
[...new Set(xx)];
```

### json 转换

```js
//取
JSON.parse(）
//存
JSON.stringify(）
```

### 存储

```js
localStorage.getItem('名'） //取
localStorage.setItem('名','值'）//存
```

### 缩减代码

(a || b) === (() => { if (a) {return a;} else {return b} })() === (a ? a : b)
(a && b) === (() => { if (a) {return b;} else {return a} })() === (a ? b : a)

## vue

### nextTick

- 在下次 DOM 更新循环结束之后执行延迟回调。在修改数据之后立即使用这个方法，获取更新后的 DOM。

```js
Vue.nextTick(function() {
  // DOM 更新了
});
this.$nextTick(() => {});
```

### 解决路由报错

```js
const originalPush = Router.prototype.push;
Router.prototype.push = function push(location) {
  return originalPush.call(this, location).catch(err => err);
};
```

### watch

```js
watch:{ xxx: { handler(newVal, oldVel) {}, deep: true, immediate: true } }
```

## lodash

[官网](https://www.lodashjs.com/)

```js
this.xxx = lodash.throttle(this.xxx, 1000); // 节流
this.xxx = lodash.debounce(this.xxx, 300); // 防抖动
difference();
_.difference([3, 2, 1], [4, 2]);
// => [3, 1]
```
